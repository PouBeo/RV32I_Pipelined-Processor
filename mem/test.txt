/*   REG store peripherals's address   */
addi  x9,  x0, 0x400
addi x10,  x9, 0x400   /*   LED0: x800 */
addi x11, x10, 0x10    /*   LED1: x810 */
addi x12, x10, 0x20    /*   LED2: x820 */
addi x13, x10, 0x30    /*   LED3: x830 */
addi x14, x10, 0x40    /*   LED4: x840 */
addi x15, x10, 0x50    /*   LED5: x850 */
addi x16, x10, 0x60    /*   LED6: x860 */
addi x17, x10, 0x70    /*   LED7: x870 */
addi x18, x10, 0x80    /*   LEDr: x880 */
addi x19, x10, 0x90    /*   LEDg: x890 */
addi x20, x10, 0xA0    /*   LCD : x8A0 */
addi x21, x10, 0x100   /*   SW  : x900 */
addi x22, x10, 0x110   /*   KEY : x910 */

/* MEM address store dec_leg7_a-common */
addi x2,  x0,   64       /* 0: x400 */
sb   x2,        0(x9)
addi x2,  x0,   121      /* 1: x404 */
sb   x2,        4(x9)
addi x2,  x0,   36       /* 2: x408 */
sb   x2,        8(x9)
addi x2,  x0,   48       /* 3: x40C */
sb   x2,        12(x9)
addi x2,  x0,   25       /* 4: x410 */
sb   x2,        16(x9)
addi x2,  x0,   18       /* 5: x414 */
sb   x2,        20(x9)
addi x2,  x0,   2        /* 6: x418 */
sb   x2,        24(x9)
addi x2,  x0,   120      /* 7: x41C */
sb   x2,        28(x9)
addi x2,  x0,   0        /* 8: x420 */
sb   x2,        32(x9)
addi x2,  x0,   16       /* 9: x424 */
sb   x2,        36(x9)
addi x2,  x0,   8        /* A: x428 */
sb   x2,        40(x9)
addi x2,  x0,   3        /* b: x42C */
sb   x2,        44(x9)
addi x2,  x0,   70       /* C: x430 */
sb   x2,        48(x9)
addi x2,  x0,   33       /* d: x434 */
sb   x2,        52(x9)
addi x2,  x0,   6        /* E: x438 */
sb   x2,        56(x9)
addi x2,  x0,   14       /* F: x43C */
sb   x2,        60(x9)

begin:
lw   x5, 0(x21)
sw   x5, 0(x18)
andi x6, x5, 0x10000   /* check SW[16] */
beq  x6, x0, begin     /* waiting until SW[16] = 1 */
add  x2, x0, x0

convert:
andi x7, x5, 0xF       /* take out 4 last bits */
addi x6, x0, 4
addi x2, x2, 1
bge  x2, x6, begin
addi x6, x0, 0

compare:
beq  x6, x7, hex_out  /* if sw value in x7 == x6, driving led7 value stored in [x9] is taken out */
addi x6, x6, 1
add  x9, x9, 4
jal  compare

hex_out:
lw x8, 0( x9)
addi x6, x0, 0
beq  x2, x6, hex0
addi x6, x6, 1
beq  x2, x6, hex1
addi x6, x6, 1
beq  x2, x6, hex2
addi x6, x6, 1
beq  x2, x6, hex3
jal  error

hex0:
sw x8, 0(x10)
jal next_hex

hex1:
sw x8, 0(x11)
jal next_hex

hex2:
sw x8, 0(x12)
jal next_hex

hex3:
sw x8, 0(x13)
jal next_hex

next_hex:
slri x5, x5, 4    
jal convert

error:
addi x9, x0, x400
lb   x2,        60(x9)  /* show FFFF */
sb   x2,        0(x14)
sb   x2,        0(x13)
sb   x2,        0(x12)
sb   x2,        0(x11)
sb   x2,        0(x10)
jal  compare













